<div [@slideInBottom] *ngIf="this.currentState.id !== 3">
  <div class="article-parent z-index-comp" [ngClass]="defineCssState()">
    <div class="article-wrap">
      <div class="article-image opacity-comp">
        <img [src]="currentArticle?.poster_image" alt="" />
      </div>
      <div class="article-content slide-in-comp">
        <mat-card class="article-main">
          <h1>{{ currentArticle?.title }}</h1>

          <div class="tags">
            <div class="tag" *ngFor="let tag of currentArticle?.tags">#{{ tag.text }}</div>
          </div>
          <mat-divider></mat-divider>
          <div class="header-bottom">
            <div class="date">
              {{ formatDate(currentArticle?.created_at) }}
            </div>
            <div class="comments-likes">
              <div class="comments">
                <svg viewBox="0 0 18 18" version="1.1">
                  <g
                    id="Desktop"
                    stroke="none"
                    stroke-width="1"
                    fill="none"
                    fill-rule="evenodd"
                    opacity="0.2"
                  >
                    <g
                      id="22_article_not-registered-user"
                      transform="translate(-1039.000000, -1010.000000)"
                      fill="#415061"
                      fill-rule="nonzero"
                    >
                      <g id="Article_body" transform="translate(170.000000, 629.000000)">
                        <g id="Group-4" transform="translate(70.000000, 318.000000)">
                          <g id="Group-2" transform="translate(0.000000, 60.000000)">
                            <g id="Group-3" transform="translate(799.000000, 0.000000)">
                              <path
                                d="M14.4878049,3 L3.51219512,3 C1.57246332,3 0,4.58172116 0,6.53287309 L0,13.5986193 C0,15.5497712 1.57246332,17.1314924 3.51219512,17.1314924 L7.10341463,17.1314924 L10.6485366,20.6467011 C10.8701337,20.8707342 11.1707043,20.9977013 11.484878,21 C11.6585796,21.000806 11.8297769,20.9583237 11.9831707,20.8763379 C12.3483796,20.6807636 12.5580275,20.280875 12.5121951,19.867261 L12.4397561,17.1314924 L14.4878049,17.1314924 C16.4275367,17.1314924 18,15.5497712 18,13.5986193 L18,6.53287309 C18,4.58172116 16.4275367,3 14.4878049,3 Z M16.2439024,13.5986193 C16.2439024,14.0671074 16.0588855,14.5164074 15.7295534,14.8476785 C15.4002212,15.1789497 14.9535509,15.3650558 14.4878049,15.3650558 L11.5331707,15.3650558 C11.2960531,15.3649656 11.0689792,15.4613454 10.9036011,15.6322719 C10.7382229,15.8031984 10.6486012,16.0341391 10.655122,16.2725626 L10.7056098,18.224475 L8.07146341,15.6211891 C7.90954421,15.459615 7.6914763,15.3677565 7.46341463,15.3650558 L3.51219512,15.3650558 C2.54232922,15.3650558 1.75609756,14.5741953 1.75609756,13.5986193 L1.75609756,6.53287309 C1.75609756,5.55729713 2.54232922,4.76643655 3.51219512,4.76643655 L14.4878049,4.76643655 C15.4576708,4.76643655 16.2439024,5.55729713 16.2439024,6.53287309 L16.2439024,13.5986193 Z"
                                id="Shape"
                                transform="translate(9.000000, 12.000000) scale(-1, 1) translate(-9.000000, -12.000000) "
                              ></path>
                            </g>
                          </g>
                        </g>
                      </g>
                    </g>
                  </g>
                </svg>
                {{ currentArticle?.comments.length }}
              </div>
              <div class="likes">
                <svg viewBox="0 0 18 16" version="1.1">
                  <g
                    id="Desktop"
                    stroke="none"
                    stroke-width="1"
                    fill="none"
                    fill-rule="evenodd"
                    opacity="0.2"
                  >
                    <g
                      id="22_article_not-registered-user"
                      transform="translate(-1112.000000, -1010.000000)"
                      fill="#415061"
                      fill-rule="nonzero"
                    >
                      <g id="Article_body" transform="translate(170.000000, 629.000000)">
                        <g id="Group-4" transform="translate(70.000000, 318.000000)">
                          <g id="Group-2" transform="translate(0.000000, 60.000000)">
                            <g id="Group" transform="translate(872.000000, 0.000000)">
                              <path
                                d="M9.9021717,3.5533685 C10.7774107,3.13710641 11.5409105,3 12.7253707,3 C15.7565041,3.01220966 18,5.49613468 18,8.66020671 C18,11.0752775 16.6141378,13.4081887 14.0327674,15.6640514 C12.6778141,16.8481467 10.9478275,18.0199404 9.70887027,18.6433283 L9,19 L8.29112973,18.6433283 C7.05217246,18.0199404 5.32218595,16.8481467 3.9672326,15.6640514 C1.38586221,13.4081887 0,11.0752775 0,8.66020671 C0,5.46228596 2.22253893,3 5.28099173,3 C6.42295575,3 7.2256242,3.15007383 8.1178452,3.57885686 C8.42848257,3.72814279 8.72033891,3.90522062 8.99179437,4.10961099 C9.27412388,3.89308189 9.57812932,3.70748247 9.9021717,3.5533685 Z M12.7440081,14.3063967 C14.9003606,12.4213606 16,10.5696802 16,8.77045998 C16,6.55478552 14.5130497,4.90796128 12.538176,4.9 C11.6343378,4.9 11.1356779,4.9895768 10.5414961,5.27225808 C10.1760079,5.44613871 9.85174833,5.68087754 9.56890571,5.97918102 L9.00181821,6.57726691 L8.42952427,5.9838845 C8.15290332,5.69707028 7.83333777,5.4675568 7.47177151,5.29374044 C6.85965429,4.99947631 6.32777468,4.9 5.46464646,4.9 C3.46505432,4.9 2,6.52360511 2,8.77045998 C2,10.5696802 3.09963943,12.4213606 5.25599192,14.3063967 C6.43163722,15.33412 7.94302979,16.3611739 9,16.9 C10.0569702,16.3611739 11.5683628,15.33412 12.7440081,14.3063967 Z"
                                id="Shape"
                              ></path>
                            </g>
                          </g>
                        </g>
                      </g>
                    </g>
                  </g></svg>{{ currentArticle?.number_of_likes }}
              </div>
            </div>
          </div>
          <div class="author-block" *ngIf="currentArticle?.author">
            <div class="author">
              <div class="portrait">
                <div class="inner-img">
                  <img [src]="currentArticle?.author.image" alt="" />
                </div>
              </div>
              <div class="about">{{ currentArticle?.author.name }}</div>
            </div>
            <div class="divider">
              <div class="inner"></div>
            </div>
            <div class="description">
              <div class="text">
                {{ currentArticle?.description }}
              </div>
              <div class="inner"></div>
            </div>
          </div>
          <div class="main-block" [innerHTML]="currentArticle?.content" *ngIf="undefMidContent"></div>
          <div class="main-block" [innerHTML]="contentBefore" *ngIf="payloadRequest && !undefMidContent"></div>
          <div class="article-call-to-action" [style.backgroundColor]="settingsAction?.bgc" #bigCard *ngIf="payloadRequest && !undefMidContent">
            <div class="left-part">
              <div class="circle"(click)="openVideo(settingsAction.url)">
                <svg
                viewBox="0 0 47 54"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                >
                  <g stroke="none" stroke-width="1" style="transform: translateX(-4px)">
                      <g
                        class="play"
                        transform="translate(-285.000000, -129.000000)"
                        stroke="#FFFFFF"
                        stroke-width="2"
                        stroke-linecap="square"
                        fill="transparent"
                      >
                        <g>
                          <g transform="translate(232.000000, 81.000000)">
                            <polygon
                              transform="translate(80.650635, 75.000000) rotate(90.000000) translate(-80.650635, -75.000000) "
                              points="80.6506351 53.3493649 105.650635 96.6506351 55.6506351 96.6506351"
                            ></polygon>
                          </g>
                        </g>
                      </g>
                    </g>
                </svg>
              </div>
            </div>
            <div class="right-part">
              <div class="devider"></div>
              <h3>{{ settingsAction?.title }}</h3>
              <p [style.color]="settingsAction?.color">{{ settingsAction?.description }}</p>
              <a [style.color]="settingsAction?.color" *ngIf="userLogined" href="https://www.business-class.pro/modules">
                <button mat-stroked-button class="button">
                  Начать обучение
                </button>
              </a>
              <button [style.color]="settingsAction?.color" *ngIf="!userLogined"
                      mat-stroked-button class="button" (click)="toggleRegistration(true)">
                Выбрать курс
              </button>
            </div>
          </div>
          <div class="main-block" [innerHTML]="contentAfter" *ngIf="payloadRequest && !undefMidContent"></div>
          <div class="plashka" #smallCard
               [style.display]=" visiblePlashka && mobileResolution ? 'flex':'none' "
               [ngStyle]="{ backgroundColor: relatedCourseBg().backgroundColor }"
          >
            <div class="title">{{ relatedCourseBg().name }}</div>
            <div class="call-to-action" *ngIf="!userLogined" (click)="toggleRegistration(true)">записаться на курс</div>
            <a href="https://www.business-class.pro/modules" *ngIf="userLogined"><div class="call-to-action">продолжить обучение</div></a>
          </div>
          <div class="course-end">
            <button mat-flat-button color="primary" class="button" (click)="likeArticle()" *ngIf="userLogined" [ngClass]="{liked: currentArticle?.user_already_liked}" >
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">
                <g><path fill="#fff"  d="M719.5,63.6c-90.4,0-170.4,44.4-219.5,112.5C450.9,108,370.9,63.6,280.5,63.6C131.1,63.6,10,184.7,10,334.1c0,57.9,23.7,129.7,49.3,155.6C103.4,534.3,500,936.4,500,936.4s398.1-400.6,430.2-432.8c32.2-32.2,59.8-105.3,59.8-169.5C990,184.7,868.9,63.6,719.5,63.6z"/></g>
              </svg>
              Понравилась статья
            </button>
            <button mat-flat-button color="primary" class="button" *ngIf="!userLogined" [ngClass]="{liked: currentArticle?.user_already_liked}" >
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">
                <g><path fill="#fff"  d="M719.5,63.6c-90.4,0-170.4,44.4-219.5,112.5C450.9,108,370.9,63.6,280.5,63.6C131.1,63.6,10,184.7,10,334.1c0,57.9,23.7,129.7,49.3,155.6C103.4,534.3,500,936.4,500,936.4s398.1-400.6,430.2-432.8c32.2-32.2,59.8-105.3,59.8-169.5C990,184.7,868.9,63.6,719.5,63.6z"/></g>
              </svg>
              Понравилась статья
            </button>
            <div class="share-menu">
              <h3 class="share-title">
                поделиться статьей
              </h3>
              <div class="buttons-wrap">
                <button shareButton="vk">
                  <img src="../../../assets/share-icons/vk.svg" alt="vk">
                </button>
                <button shareButton="facebook">
                  <img src="../../../assets/share-icons/facebook.svg" alt="fb">
                </button>
                <button shareButton="twitter">
                  <img src="../../../assets/share-icons/twitter.svg" alt="tw">
                </button>
              </div>
            </div>
          </div>
          <mat-divider *ngIf="!mobileResolution"></mat-divider>
          <app-comments [comments]="currentArticle?.comments"></app-comments>
        </mat-card>
        <mat-card
          *ngIf="!userLogined || userLogined && !userInfo.emailVerified"
          class="article-right"
          [ngStyle]="{
            backgroundColor: relatedCourseBg().backgroundColor,
            color: relatedCourseBg().color
          }"
        >
          <div class="course-wrap" *ngIf="userLogined">
            <div class="course-play" (click)="openVideo(currentArticle.related_course.youtube_video_url)">
              <svg viewBox="0 0 122 122" version="1.1">
                <g id="Desktop" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g
                    id="22_article_not-registered-user"
                    transform="translate(-1519.000000, -973.000000)"
                    stroke="#FFFFFF"
                  >
                    <g id="cours_banner" transform="translate(1330.000000, 913.000000)">
                      <g id="Group-4" transform="translate(190.000000, 61.000000)">
                        <circle
                          id="Oval"
                          stroke-width="1.5"
                          opacity="0.400000006"
                          cx="60"
                          cy="60"
                          r="60"
                        ></circle>
                        <path
                          *ngIf="!userInfo.emailVerified"
                          d="M72.3918416,59.707414 C71.986631,59.296392 71.4949207,59.0910353 70.9159506,59.0910353 L70.221901,59.0910353 L70.221901,54.8635242 C70.221901,52.1628093 69.2672882,49.8438898 67.3574547,47.9063801 C65.4477731,45.9687934 63.1622969,45 60.4998858,45 C57.8375508,45 55.5516185,45.9687934 53.6420889,47.906303 C51.7322554,49.8438898 50.7776426,52.1627322 50.7776426,54.8635242 L50.7776426,59.0910353 L50.083289,59.0910353 C49.5047749,59.0910353 49.0127606,59.296392 48.6076259,59.707414 C48.2024913,60.1181275 48,60.6172916 48,61.2047523 L48,73.8864372 C48,74.4733581 48.2025673,74.9726765 48.6076259,75.3837755 C49.0127606,75.7944119 49.5047749,76 50.083289,76 L70.9164827,76 C71.4954527,76 71.9870871,75.7946433 72.3923737,75.3837755 C72.7971283,74.9726765 73,74.4733581 73,73.8864372 L73,61.2045209 C73.0003037,60.617523 72.7971283,60.1184359 72.3918416,59.707414 Z M67,59 L54,59 L54,54.2853949 C54,52.5503452 54.6348903,51.0688234 55.9044042,49.8413457 C57.174096,48.6136959 58.7058723,48 60.5002668,48 C62.2948392,48 63.8262598,48.6136099 65.0960404,49.8413457 C66.3651986,51.0687374 67,52.5503452 67,54.2853949 L67,59 Z"
                          id="Shape-Copy-3"
                          fill="#FFFFFF"
                          fill-rule="nonzero"
                          opacity="0.899855841"
                        ></path>
                        <polygon
                          *ngIf="userInfo.emailVerified"
                          id="Polygon"
                          stroke-width="2"
                          transform="translate(64.520508, 60.000000) rotate(90.000000) translate(-64.520508, -60.000000) "
                          points="64.5205081 42.6794919 84.5205081 77.3205081 44.5205081 77.3205081"
                        ></polygon>
                      </g>
                    </g>
                  </g>
                </g>
              </svg>
            </div>
            <div class="course-header">
              {{ relatedCourseBg().name }}
            </div>

<!--            <div *ngIf="userInfo.emailVerified">-->
<!--              <div class="course-about">-->
<!--                {{ relatedCourseBg().about }}-->
<!--              </div>-->
<!--              <a href="https://www.business-class.pro/modules">-->
<!--                <button mat-stroked-button class="button">-->
<!--                  Начать обучение-->
<!--                </button>-->
<!--              </a>-->
<!--            </div>-->

            <div *ngIf="!userInfo.emailVerified">
              <div class="confirm-email-wrap">
                <div class="confirm-text" style="color: #ffffff">
                  Чтобы открыть материалы курса, завершите регистрацию, перейдя по&nbsp;ссылке,
                  которую мы&nbsp;отправили на&nbsp;{{ userInfo.email }}.
                  <br />
                  <br />
                  Если вы&nbsp;не&nbsp;получили письмо, пожалуйста, проверьте папку
                  &laquo;Спам&raquo;. Также вы&nbsp;можете отправить письмо повторно или написать
                  нам в&nbsp;случае возникновения трудностей.
                </div>
                <div class="buttons">
                  <button
                    mat-flat-button
                    color="accent"
                    (click)="disabled = !disabled"
                    [disabled]="disabled"
                    [style.color]="relatedCourseBg().color"
                    style="background: #fff"
                  >
                    Отправить еще раз
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="course-wrap" *ngIf="!userLogined">
            <div class="course-play" (click)="openVideo(currentArticle.related_course.youtube_video_url)">
              <svg viewBox="0 0 122 122" version="1.1">
                <g id="Desktop" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g
                    id="22_article_not-registered-user"
                    transform="translate(-1519.000000, -973.000000)"
                    stroke="#FFFFFF"
                  >
                    <g id="cours_banner" transform="translate(1330.000000, 913.000000)">
                      <g id="Group-4" transform="translate(190.000000, 61.000000)">
                        <circle
                          id="Oval"
                          stroke-width="1.5"
                          opacity="0.400000006"
                          cx="60"
                          cy="60"
                          r="60"
                        ></circle>
                        <polygon
                          id="Polygon"
                          stroke-width="2"
                          transform="translate(64.520508, 60.000000) rotate(90.000000) translate(-64.520508, -60.000000) "
                          points="64.5205081 42.6794919 84.5205081 77.3205081 44.5205081 77.3205081"
                        ></polygon>
                      </g>
                    </g>
                  </g>
                </g>
              </svg>
            </div>
            <div class="course-header">
              {{ relatedCourseBg().name }}
            </div>

            <div class="course-about">
              {{ relatedCourseBg().about }}
            </div>
            <button mat-stroked-button class="button" (click)="toggleRegistration(true)">
              Начать обучение
            </button>
          </div>
        </mat-card>
        <!--ngIf user logined and proved-->
        <mat-card
          *ngIf="userLogined && userInfo.emailVerified"
          class="article-right"
          style="background: #F0F0F0; border-radius: none; box-shadow: none;"
        >
          <div class="course-wrap">
            <div class="user-ava" [style.border-color]="relatedCourseBg().backgroundColor">
              <img [src]=" userInfo.avatar ?
                'https://business-class.pro' + userInfo.avatar
                : '../../../../assets/default_avatar.png'
              ">
            </div>
            <div class="user-name">
              {{ userInfo.firstName }}  {{ userInfo.lastName }}
            </div>
            <div class="some-text">Вы проходите:</div>
            <div class="user-course" [style.color]="relatedCourseBg().backgroundColor">
              {{ relatedCourseBg().name }}
            </div>
            <a href="https://www.business-class.pro/modules">
              <button mat-stroked-button class="button"
                [style.background]="relatedCourseBg().backgroundColor"
              >
                Начать обучение
              </button>
            </a>
          </div>
        </mat-card>
      </div>

      <div class="more">
        <div class="more__container">
          <h2 class="more__title">Читайте также</h2>
        </div>
        <div class="more__row">
          <div class="more__col" *ngFor="let article of currentArticle?.relevant_articles; let index = index">
            <app-articles-card
              [big]="true"
              [article]="article"
              [style.grid-row-end]="'span 2'"
              [isNotHome]="true"
              (click)="scrollTop()"
            ></app-articles-card>
          </div>
        </div>
      </div>
    </div>
    <app-footer></app-footer>
  </div>
</div>

<div *ngIf="this.currentState.id === 3">
  <app-invalid-page></app-invalid-page>
</div>
